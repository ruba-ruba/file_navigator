h1 Listing locations
table
  tr
    th Name
    th Lat
    th Lng
    th
    th
    th
  - @locations.each do |location|
    tr
      td = location.name
      td = location.latitude
      td = location.longitude
      td = link_to 'Show', location
      td = link_to 'Edit', edit_location_path(location)
      td = link_to 'Destroy', location, method: :delete, data: {confirm: 'Are you sure?'} 
br/
= link_to 'New Location', new_location_path

br/

#map-canvas

button class="btn btn_add_marker"
  | add marker
button class="btn btn_remove_markers"
  | remove all markers
button class="btn arr"
  | show_data
br/
br/
| marker name:  
input name="marker_name"
button class="btn save_marker"
  | save marker



coffee:

  position = []

  myLatlng = new google.maps.LatLng(48.363882, 24.044922)

  initialize = ->
    mapProp =
      center: myLatlng
      zoom: 6
      mapTypeId: google.maps.MapTypeId.ROADMAP

    map = new google.maps.Map(document.getElementById("map-canvas"), mapProp)


    addmarker = (coords) ->
      marker = new google.maps.Marker(
        position: coords
        title: "new marker"
        draggable: true
        map: map
      )
      infowindow = new google.maps.InfoWindow(content: 'contentString')
      lat = marker.getPosition().lat();
      lng = marker.getPosition().lng();
      position.push [lat, lng]


      google.maps.event.addListener marker, "dragend", ->
        lat = marker.getPosition().lat();
        lng = marker.getPosition().lng();
        position = []
        position.push lat
        position.push lng
        console.log position

    $(".btn_add_marker").on "click", ->
      addmarker myLatlng      

    remove_markers = ->
      #some code here

    $(".btn_remove_markers").on "click", ->
      remove_markers

    $(".arr").click ->
      alert(position)

  google.maps.event.addDomListener window, "load", initialize

  $(".save_marker").on "click", ->
    marker_name = $('input[name="marker_name"]').val()
    saveData = $.ajax(
      type: "POST"
      url: "locations/"
      data: {
              location: {
                          name: marker_name,
                          latitude: position[0],
                          longitude: position[1]
                        }
            }
      dataType: "text"

      success: (resultData) ->
        alert "Save Complete"
    )
    saveData.error ->
      alert "Something went wrong"
    












sass:
  #map-canvas
    height: 400px
    width: 800px
    bodrder: 1px solid silver

  input[name="marker_name"]
    width: 200px !important
    height: 30px
    display: inline-block